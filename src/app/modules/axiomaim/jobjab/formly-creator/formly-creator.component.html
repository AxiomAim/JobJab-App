<div class="flex w-full min-w-0 flex-col sm:absolute sm:inset-0 sm:overflow-hidden">
    <mat-drawer-container class="flex-auto sm:h-full">
        <!-- Drawer -->
        <mat-drawer class="w-72 dark:bg-gray-900" [autoFocus]="false" [mode]="drawerMode" [opened]="drawerOpened"
            #matDrawer>
            <formly-sidebar (fieldTypeSelected)="addField($event)"></formly-sidebar>
        </mat-drawer>

        <!-- Drawer content -->
        <mat-drawer-content class="flex flex-col">
            <!-- Main -->
            <div class="flex-auto p-6 sm:p-10">
                <!-- Drawer toggle -->
                <button class="mb-4" mat-icon-button (click)="matDrawer.toggle()">
                    <mat-icon [svgIcon]="'heroicons_outline:bars-3'"></mat-icon>
                </button>

                <!-- CONTENT GOES HERE -->
                <div class="h-400 max-h-400 min-h-400 rounded-2xl border-2 border-dashed border-gray-300">
                    <form [formGroup]="form" class="px-4 py-4">
                        <formly-form [model]="model" [options]="options" [form]="form">
                            <!-- Remove [fields] to avoid double-rendering; manual loop provides the fields -->
                            <div cdkDropList (cdkDropListDropped)="drop($event)" class="flex flex-col space-y-4">
                                @for (field of fields; track field.key; let i = $index) {
                                <div cdkDrag [cdkDragData]="field"
                                    class="p-4 border rounded bg-white dark:bg-gray-800 cursor-move mb-4"
                                    cdkDragLockAxis="y">
                                    <formly-field [field]="field"></formly-field>
                                </div>
                                }
                            </div>
                        </formly-form>
                    </form>
                </div>
            </div>
        </mat-drawer-content>
    </mat-drawer-container>
</div>