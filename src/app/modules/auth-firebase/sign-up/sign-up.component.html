<div class="flex min-w-0 flex-auto flex-col items-center sm:flex-row sm:justify-center md:items-start md:justify-start">
    <div
        class="w-full px-4 py-8 sm:bg-card sm:w-auto sm:rounded-2xl sm:p-12 sm:shadow md:flex md:h-full md:w-1/2 md:items-center md:justify-end md:rounded-none md:p-16 md:shadow-none">
        <div class="mx-auto w-full max-w-80 sm:mx-0 sm:w-80">
            <!-- Logo -->
            <div class="w-50">
                <img src="images/logo/logo.svg" />
            </div>

            <!-- Title -->
            <div class="mt-8 text-4xl font-extrabold leading-tight tracking-tight">
                Sign up
            </div>
            <div class="mt-0.5 flex items-baseline font-medium">
                <div>Already have an account?</div>
                <a class="ml-1 text-primary-500 hover:underline" [routerLink]="['/sign-in']">Sign in
                </a>
            </div>

            <!-- Alert -->
            @if (showAlert) {
            <axiomaim-alert class="mt-8" [appearance]="'outline'" [showIcon]="false" [type]="alert.type"
                [@shake]="alert.type === 'error'">
                {{ alert.message }}
            </axiomaim-alert>
            }

            <!-- Sign Up form -->
            <form class="mt-8" [formGroup]="signUpForm" #signUpNgForm="ngForm">
                <!-- Name field -->
                <mat-form-field class="w-full">
                    <mat-label>First name</mat-label>
                    <input id="firstName" matInput [formControlName]="'firstName'" />
                    @if (signUpForm.get('firstName')?.hasError('required') && signUpForm.get('firstName')?.touched) {
                    <mat-error> First name is required </mat-error>
                    }
                </mat-form-field>

                <mat-form-field class="w-full">
                    <mat-label>Last name</mat-label>
                    <input id="lastName" matInput [formControlName]="'lastName'" />
                    @if (signUpForm.get('lastName')?.hasError('required') && signUpForm.get('lastName')?.touched) {
                    <mat-error> Last name is required </mat-error>
                    }
                </mat-form-field>

                <!-- Email field -->
                <mat-form-field class="w-full">
                    <mat-label>Email address</mat-label>
                    <input id="email" matInput [formControlName]="'email'" />
                    @if (signUpForm.get('email')?.hasError('required') && signUpForm.get('email')?.touched) {
                    <mat-error> Email address is required </mat-error>
                    }
                    @if (signUpForm.get('email')?.hasError('email') && signUpForm.get('email')?.touched) {
                    <mat-error>
                        Please enter a valid email address
                    </mat-error>
                    }
                </mat-form-field>

                <!-- Password field -->
                <mat-form-field class="w-full">
                    <mat-label>Password</mat-label>
                    <input id="password" matInput type="password" [formControlName]="'password'" #passwordField />
                    <button mat-icon-button type="button" (click)="
                            passwordField.type === 'password'
                                ? (passwordField.type = 'text')
                                : (passwordField.type = 'password')
                        " matSuffix>
                        @if (passwordField.type === 'password') {
                        <mat-icon class="icon-size-5 text-black" svgIcon="heroicons_solid:eye"></mat-icon>
                        }
                        @if (passwordField.type === 'text') {
                        <mat-icon class="icon-size-5 text-black" svgIcon="heroicons_solid:eye-slash"></mat-icon>
                        }
                    </button>
                    @if (signUpForm.get('password')?.hasError('required') && signUpForm.get('password')?.touched) {
                    <mat-error> Password is required </mat-error>
                    }
                </mat-form-field>

                <!-- Company field -->
                <mat-form-field class="w-full">
                    <mat-label>Company</mat-label>
                    <input id="company-confirm" matInput [formControlName]="'company'" />
                    @if (signUpForm.get('company')?.hasError('required') && signUpForm.get('company')?.touched) {
                    <mat-error> Company is required </mat-error>
                    }
                </mat-form-field>

                <!-- Address -->
                <div class="mt-4">
                    <address-lookup class="w-full" label="Address" [formControl]="signUpForm.controls['address']"
                        placeholder="Enter address">
                    </address-lookup>
                </div>

                <!-- Phone numbers -->
                <div class="mt-4">
                    <div class="space-y-4">
                        @for (
                        phoneNumber of signUpForm.get('phoneNumbers')?.['controls'] || [];
                        track trackByFn($index, phoneNumber);
                        let i = $index;
                        let first = $first;
                        let last = $last
                        ) {
                        <div class="relative flex flex-wrap">
                            <mat-form-field class="flex-auto" subscriptSizing="dynamic">
                                @if (first) {
                                <mat-label>Phone (add a Mobile number to send texts)</mat-label>
                                }
                                <input matInput autocomplete="chrome-off" [formControl]="
                            phoneNumber.get('phoneNumber')
                        " placeholder="Phone" />
                                <mat-select class="mr-1.5" [formControl]="
                            phoneNumber.get('country')
                        " matPrefix>
                                    <mat-select-trigger>
                                        <span class="flex items-center">
                                            <span class="mr-1 hidden h-4 w-6 overflow-hidden sm:flex"
                                                [style.background]="
                                        'url(\'/images/apps/contacts/flags.png\') no-repeat 0 0'
                                    " [style.backgroundSize]="
                                        '24px 3876px'
                                    " [style.backgroundPosition]="
                                    phoneNumber.get('country').value ?
                                        getCountryByIso(phoneNumber.get('country').value || 'us')?.flagImagePos || '-1px -69px'
                                        : '-1px -69px'
                                    "></span>
                                            <span class="text-default font-medium sm:mx-0.5">{{
                                                phoneNumber.get('country').value ?
                                                getCountryByIso(phoneNumber.get('country').value || 'us')?.code ||
                                                '+1'
                                                : '+1'
                                                }}</span>
                                        </span>
                                    </mat-select-trigger>
                                    @for (
                                    country of countries;
                                    track trackByFn($index, country)
                                    ) {
                                    <mat-option [value]="country.iso">
                                        <span class="flex items-center">
                                            <span class="h-4 w-6 overflow-hidden" [style.background]="
                                            'url(\'/images/apps/contacts/flags.png\') no-repeat 0 0'
                                        " [style.backgroundSize]="
                                            '24px 3876px'
                                        " [style.backgroundPosition]="
                                            country.flagImagePos
                                        "></span>
                                            <span class="ml-2">{{
                                                country.name
                                                }}</span>
                                            <span class="ml-2 font-medium">{{
                                                country.code
                                                }}</span>
                                        </span>
                                    </mat-option>
                                    }
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field class="ml-2 w-full max-w-24 flex-auto sm:ml-4 sm:max-w-40"
                                subscriptSizing="dynamic">
                                @if (first) {
                                <mat-label>Label</mat-label>
                                }
                                <mat-icon matPrefix class="hidden icon-size-5 sm:flex text-black"
                                    svgIcon="heroicons_solid:tag"></mat-icon>
                                <mat-select [formControl]="
                            phoneNumber.get('label')
                        ">
                                    @for (phoneLabel of phoneLabels; track trackByFn($index, phoneLabel)) {
                                    <mat-option [value]="phoneLabel.value">{{phoneLabel.name}}</mat-option>
                                    }
                                </mat-select>
                            </mat-form-field>
                            <!-- Remove phone number -->
                            @if (!(first && last)) {
                            <div class="flex w-10 items-center pl-2" [ngClass]="{ 'mt-6': first }">
                                <button class="h-8 min-h-8 w-8" mat-icon-button (click)="
                                removePhoneNumberField(i)
                            " matTooltip="Remove">
                                    <mat-icon class="icon-size-5 text-black" svgIcon="heroicons_solid:trash"></mat-icon>
                                </button>
                            </div>
                            }
                        </div>
                        }
                    </div>
                    <div class="group -ml-4 mt-2 inline-flex cursor-pointer items-center rounded px-4 py-2"
                        (click)="addPhoneNumberField()">
                        <mat-icon class="icon-size-5 text-black" svgIcon="heroicons_solid:plus-circle"></mat-icon>
                        <span class="text-secondary ml-2 font-medium group-hover:underline">Add a phone
                            number</span>
                    </div>
                </div>


                <!-- ToS and PP -->
                <div class="mt-1.5 inline-flex w-full items-end">
                    <mat-checkbox class="-ml-2" [color]="'primary'" [formControlName]="'agreements'">
                        <span>I agree with</span>
                        <a class="ml-1 text-primary-500 hover:underline" href="/terms">Terms
                        </a>
                        <span>and</span>
                        <a class="ml-1 text-primary-500 hover:underline" href="/privacy">Privacy Policy
                        </a>
                    </mat-checkbox>
                    @if (signUpForm.get('agreements')?.hasError('required') && signUpForm.get('agreements')?.touched) {
                    <mat-error class="ml-2">You must agree to the terms and privacy policy</mat-error>
                    }
                </div>

                <!-- Submit button -->
                <button class="axiomaim-mat-button-large mt-6 w-full" mat-flat-button [color]="'primary'"
                    [disabled]="signUpForm.invalid || signUpForm.disabled" (click)="signUp()">
                    @if (!signUpForm.disabled) {
                    <span> Create your account </span>
                    }
                    @if (signUpForm.disabled) {
                    <mat-progress-spinner [diameter]="24" [mode]="'indeterminate'"></mat-progress-spinner>
                    }
                </button>
            </form>
        </div>
    </div>
    <div
        class="relative hidden h-full w-1/2 flex-auto items-center justify-center overflow-hidden bg-sky-800 p-16 dark:border-l md:flex lg:px-28">
        <!-- Background -->
        <!-- Rings -->
        <!-- prettier-ignore -->
        <svg class="absolute inset-0 pointer-events-none" viewBox="0 0 960 540" width="100%" height="100%"
            preserveAspectRatio="xMidYMax slice" xmlns="http://www.w3.org/2000/svg">
            <g class="text-sky-700 opacity-25" fill="none" stroke="currentColor" stroke-width="100">
                <circle r="234" cx="196" cy="23"></circle>
                <circle r="234" cx="790" cy="491"></circle>
            </g>
        </svg>
        <!-- Dots -->
        <!-- prettier-ignore -->
        <svg class="absolute -top-16 -right-16 text-sky-700" viewBox="0 0 220 192" width="220" height="192" fill="none">
            <defs>
                <pattern id="837c3e70-6c3a-44e6-8854-cc48c737b659" x="0" y="0" width="20" height="20"
                    patternUnits="userSpaceOnUse">
                    <rect x="0" y="0" width="4" height="4" fill="currentColor"></rect>
                </pattern>
            </defs>
            <rect width="220" height="192" fill="url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"></rect>
        </svg>
        <!-- Content -->
        <div class="relative z-10 w-full max-w-2xl">
            <div class="text-7xl font-bold leading-none text-gray-100">
                <div>Welcome to</div>
                <div>JobJab.app</div>
            </div>
            <div class="mt-6 text-lg leading-6 tracking-tight text-gray-400">
                Field Service App
            </div>
        </div>
    </div>
</div>