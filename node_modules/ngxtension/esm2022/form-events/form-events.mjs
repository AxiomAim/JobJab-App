import { toSignal } from '@angular/core/rxjs-interop';
import { PristineChangeEvent, StatusChangeEvent, TouchedChangeEvent, ValueChangeEvent, } from '@angular/forms';
import { combineLatest, defer, distinctUntilChanged, filter, map, startWith, } from 'rxjs';
function valueEvents$(form) {
    return form.events.pipe(filter((event) => event instanceof ValueChangeEvent));
}
function statusEvents$(form) {
    return form.events.pipe(filter((event) => event instanceof StatusChangeEvent));
}
function touchedEvents$(form) {
    return form.events.pipe(filter((event) => event instanceof TouchedChangeEvent));
}
function pristineEvents$(form) {
    return form.events.pipe(filter((event) => event instanceof PristineChangeEvent));
}
function isValueEvent(event) {
    return event instanceof ValueChangeEvent;
}
function isStatusEvent(event) {
    return event instanceof StatusChangeEvent;
}
function isPristineEvent(event) {
    return event instanceof PristineChangeEvent;
}
function isTouchedEvent(event) {
    return event instanceof TouchedChangeEvent;
}
export function allEventsObservable(form) {
    return defer(() => combineLatest([
        valueEvents$(form).pipe(startWith(form.getRawValue()), map(() => form.getRawValue()), distinctUntilChanged((previous, current) => JSON.stringify(previous) === JSON.stringify(current))),
        statusEvents$(form).pipe(startWith(form.status)),
        touchedEvents$(form).pipe(startWith(form.touched)),
        pristineEvents$(form).pipe(startWith(form.pristine)),
    ]).pipe(map(([valueParam, statusParam, touchedParam, pristineParam]) => {
        // Original values (plus value)
        const stat = isStatusEvent(statusParam)
            ? statusParam.status
            : statusParam;
        const touch = isTouchedEvent(touchedParam)
            ? touchedParam.touched
            : touchedParam;
        const prist = isPristineEvent(pristineParam)
            ? pristineParam.pristine
            : pristineParam;
        // Derived values - not directly named as events but are aliases for something that can be derived from original values
        const validDerived = stat === 'VALID';
        const invalidDerived = stat === 'INVALID';
        const pendingDerived = stat === 'PENDING';
        const dirtyDerived = !prist;
        const untouchedDerived = !touch;
        return {
            value: valueParam,
            status: stat,
            touched: touch,
            pristine: prist,
            valid: validDerived,
            invalid: invalidDerived,
            pending: pendingDerived,
            dirty: dirtyDerived,
            untouched: untouchedDerived,
        };
    })));
}
export function allEventsSignal(form) {
    return toSignal(allEventsObservable(form), {
        initialValue: {
            value: form.getRawValue(),
            status: form.status,
            pristine: form.pristine,
            touched: form.touched,
            valid: form.valid,
            invalid: form.invalid,
            pending: form.pending,
            dirty: form.dirty,
            untouched: form.untouched,
        },
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1ldmVudHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWJzL25neHRlbnNpb24vZm9ybS1ldmVudHMvc3JjL2Zvcm0tZXZlbnRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUN0RCxPQUFPLEVBSU4sbUJBQW1CLEVBQ25CLGlCQUFpQixFQUNqQixrQkFBa0IsRUFDbEIsZ0JBQWdCLEdBQ2hCLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUVOLGFBQWEsRUFDYixLQUFLLEVBQ0wsb0JBQW9CLEVBQ3BCLE1BQU0sRUFDTixHQUFHLEVBQ0gsU0FBUyxHQUNULE1BQU0sTUFBTSxDQUFDO0FBRWQsU0FBUyxZQUFZLENBQUksSUFBd0I7SUFDaEQsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDdEIsTUFBTSxDQUNMLENBQUMsS0FBbUIsRUFBZ0QsRUFBRSxDQUNyRSxLQUFLLFlBQVksZ0JBQWdCLENBQ2xDLENBQ0QsQ0FBQztBQUNILENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FBSSxJQUF3QjtJQUNqRCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUN0QixNQUFNLENBQ0wsQ0FBQyxLQUFtQixFQUE4QixFQUFFLENBQ25ELEtBQUssWUFBWSxpQkFBaUIsQ0FDbkMsQ0FDRCxDQUFDO0FBQ0gsQ0FBQztBQUVELFNBQVMsY0FBYyxDQUFJLElBQXdCO0lBQ2xELE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQ3RCLE1BQU0sQ0FDTCxDQUFDLEtBQW1CLEVBQStCLEVBQUUsQ0FDcEQsS0FBSyxZQUFZLGtCQUFrQixDQUNwQyxDQUNELENBQUM7QUFDSCxDQUFDO0FBRUQsU0FBUyxlQUFlLENBQUksSUFBd0I7SUFDbkQsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDdEIsTUFBTSxDQUNMLENBQUMsS0FBbUIsRUFBZ0MsRUFBRSxDQUNyRCxLQUFLLFlBQVksbUJBQW1CLENBQ3JDLENBQ0QsQ0FBQztBQUNILENBQUM7QUFFRCxTQUFTLFlBQVksQ0FDcEIsS0FBdUI7SUFFdkIsT0FBTyxLQUFLLFlBQVksZ0JBQWdCLENBQUM7QUFDMUMsQ0FBQztBQUNELFNBQVMsYUFBYSxDQUFJLEtBQXVCO0lBQ2hELE9BQU8sS0FBSyxZQUFZLGlCQUFpQixDQUFDO0FBQzNDLENBQUM7QUFDRCxTQUFTLGVBQWUsQ0FDdkIsS0FBdUI7SUFFdkIsT0FBTyxLQUFLLFlBQVksbUJBQW1CLENBQUM7QUFDN0MsQ0FBQztBQUNELFNBQVMsY0FBYyxDQUN0QixLQUF1QjtJQUV2QixPQUFPLEtBQUssWUFBWSxrQkFBa0IsQ0FBQztBQUM1QyxDQUFDO0FBcUJELE1BQU0sVUFBVSxtQkFBbUIsQ0FDbEMsSUFBd0I7SUFFeEIsT0FBTyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQ2pCLGFBQWEsQ0FBQztRQUNiLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQ3RCLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsRUFDN0IsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUM3QixvQkFBb0IsQ0FDbkIsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FDckIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUNyRCxDQUNEO1FBQ0QsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2hELGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNsRCxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7S0FDcEQsQ0FBQyxDQUFDLElBQUksQ0FDTixHQUFHLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLGFBQWEsQ0FBQyxFQUFFLEVBQUU7UUFDOUQsK0JBQStCO1FBQy9CLE1BQU0sSUFBSSxHQUEwQyxhQUFhLENBQ2hFLFdBQVcsQ0FDWDtZQUNBLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTTtZQUNwQixDQUFDLENBQUMsV0FBVyxDQUFDO1FBQ2YsTUFBTSxLQUFLLEdBQWlDLGNBQWMsQ0FBQyxZQUFZLENBQUM7WUFDdkUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxPQUFPO1lBQ3RCLENBQUMsQ0FBQyxZQUFZLENBQUM7UUFDaEIsTUFBTSxLQUFLLEdBQWtDLGVBQWUsQ0FDM0QsYUFBYSxDQUNiO1lBQ0EsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxRQUFRO1lBQ3hCLENBQUMsQ0FBQyxhQUFhLENBQUM7UUFFakIsdUhBQXVIO1FBQ3ZILE1BQU0sWUFBWSxHQUFHLElBQUksS0FBSyxPQUFPLENBQUM7UUFDdEMsTUFBTSxjQUFjLEdBQUcsSUFBSSxLQUFLLFNBQVMsQ0FBQztRQUMxQyxNQUFNLGNBQWMsR0FBRyxJQUFJLEtBQUssU0FBUyxDQUFDO1FBQzFDLE1BQU0sWUFBWSxHQUFHLENBQUMsS0FBSyxDQUFDO1FBQzVCLE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxLQUFLLENBQUM7UUFFaEMsT0FBTztZQUNOLEtBQUssRUFBRSxVQUFVO1lBQ2pCLE1BQU0sRUFBRSxJQUFJO1lBQ1osT0FBTyxFQUFFLEtBQUs7WUFDZCxRQUFRLEVBQUUsS0FBSztZQUNmLEtBQUssRUFBRSxZQUFZO1lBQ25CLE9BQU8sRUFBRSxjQUFjO1lBQ3ZCLE9BQU8sRUFBRSxjQUFjO1lBQ3ZCLEtBQUssRUFBRSxZQUFZO1lBQ25CLFNBQVMsRUFBRSxnQkFBZ0I7U0FDM0IsQ0FBQztJQUNILENBQUMsQ0FBQyxDQUNGLENBQ0QsQ0FBQztBQUNILENBQUM7QUFTRCxNQUFNLFVBQVUsZUFBZSxDQUM5QixJQUF3QjtJQUV4QixPQUFPLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUMxQyxZQUFZLEVBQUU7WUFDYixLQUFLLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUN6QixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07WUFDbkIsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO1lBQ3ZCLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztZQUNyQixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7WUFDakIsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1lBQ3JCLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztZQUNyQixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7WUFDakIsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1NBQ3pCO0tBQ0QsQ0FBQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpZ25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgdG9TaWduYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlL3J4anMtaW50ZXJvcCc7XG5pbXBvcnQge1xuXHRBYnN0cmFjdENvbnRyb2wsXG5cdENvbnRyb2xFdmVudCxcblx0Rm9ybUNvbnRyb2xTdGF0dXMsXG5cdFByaXN0aW5lQ2hhbmdlRXZlbnQsXG5cdFN0YXR1c0NoYW5nZUV2ZW50LFxuXHRUb3VjaGVkQ2hhbmdlRXZlbnQsXG5cdFZhbHVlQ2hhbmdlRXZlbnQsXG59IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7XG5cdE9ic2VydmFibGUsXG5cdGNvbWJpbmVMYXRlc3QsXG5cdGRlZmVyLFxuXHRkaXN0aW5jdFVudGlsQ2hhbmdlZCxcblx0ZmlsdGVyLFxuXHRtYXAsXG5cdHN0YXJ0V2l0aCxcbn0gZnJvbSAncnhqcyc7XG5cbmZ1bmN0aW9uIHZhbHVlRXZlbnRzJDxUPihmb3JtOiBBYnN0cmFjdENvbnRyb2w8VD4pIHtcblx0cmV0dXJuIGZvcm0uZXZlbnRzLnBpcGUoXG5cdFx0ZmlsdGVyKFxuXHRcdFx0KGV2ZW50OiBDb250cm9sRXZlbnQpOiBldmVudCBpcyBWYWx1ZUNoYW5nZUV2ZW50PHR5cGVvZiBmb3JtLnZhbHVlPiA9PlxuXHRcdFx0XHRldmVudCBpbnN0YW5jZW9mIFZhbHVlQ2hhbmdlRXZlbnQsXG5cdFx0KSxcblx0KTtcbn1cblxuZnVuY3Rpb24gc3RhdHVzRXZlbnRzJDxUPihmb3JtOiBBYnN0cmFjdENvbnRyb2w8VD4pIHtcblx0cmV0dXJuIGZvcm0uZXZlbnRzLnBpcGUoXG5cdFx0ZmlsdGVyKFxuXHRcdFx0KGV2ZW50OiBDb250cm9sRXZlbnQpOiBldmVudCBpcyBTdGF0dXNDaGFuZ2VFdmVudCA9PlxuXHRcdFx0XHRldmVudCBpbnN0YW5jZW9mIFN0YXR1c0NoYW5nZUV2ZW50LFxuXHRcdCksXG5cdCk7XG59XG5cbmZ1bmN0aW9uIHRvdWNoZWRFdmVudHMkPFQ+KGZvcm06IEFic3RyYWN0Q29udHJvbDxUPikge1xuXHRyZXR1cm4gZm9ybS5ldmVudHMucGlwZShcblx0XHRmaWx0ZXIoXG5cdFx0XHQoZXZlbnQ6IENvbnRyb2xFdmVudCk6IGV2ZW50IGlzIFRvdWNoZWRDaGFuZ2VFdmVudCA9PlxuXHRcdFx0XHRldmVudCBpbnN0YW5jZW9mIFRvdWNoZWRDaGFuZ2VFdmVudCxcblx0XHQpLFxuXHQpO1xufVxuXG5mdW5jdGlvbiBwcmlzdGluZUV2ZW50cyQ8VD4oZm9ybTogQWJzdHJhY3RDb250cm9sPFQ+KSB7XG5cdHJldHVybiBmb3JtLmV2ZW50cy5waXBlKFxuXHRcdGZpbHRlcihcblx0XHRcdChldmVudDogQ29udHJvbEV2ZW50KTogZXZlbnQgaXMgUHJpc3RpbmVDaGFuZ2VFdmVudCA9PlxuXHRcdFx0XHRldmVudCBpbnN0YW5jZW9mIFByaXN0aW5lQ2hhbmdlRXZlbnQsXG5cdFx0KSxcblx0KTtcbn1cblxuZnVuY3Rpb24gaXNWYWx1ZUV2ZW50PFQ+KFxuXHRldmVudDogQ29udHJvbEV2ZW50IHwgVCxcbik6IGV2ZW50IGlzIFZhbHVlQ2hhbmdlRXZlbnQ8VD4ge1xuXHRyZXR1cm4gZXZlbnQgaW5zdGFuY2VvZiBWYWx1ZUNoYW5nZUV2ZW50O1xufVxuZnVuY3Rpb24gaXNTdGF0dXNFdmVudDxUPihldmVudDogQ29udHJvbEV2ZW50IHwgVCk6IGV2ZW50IGlzIFN0YXR1c0NoYW5nZUV2ZW50IHtcblx0cmV0dXJuIGV2ZW50IGluc3RhbmNlb2YgU3RhdHVzQ2hhbmdlRXZlbnQ7XG59XG5mdW5jdGlvbiBpc1ByaXN0aW5lRXZlbnQ8VD4oXG5cdGV2ZW50OiBDb250cm9sRXZlbnQgfCBULFxuKTogZXZlbnQgaXMgUHJpc3RpbmVDaGFuZ2VFdmVudCB7XG5cdHJldHVybiBldmVudCBpbnN0YW5jZW9mIFByaXN0aW5lQ2hhbmdlRXZlbnQ7XG59XG5mdW5jdGlvbiBpc1RvdWNoZWRFdmVudDxUPihcblx0ZXZlbnQ6IENvbnRyb2xFdmVudCB8IFQsXG4pOiBldmVudCBpcyBUb3VjaGVkQ2hhbmdlRXZlbnQge1xuXHRyZXR1cm4gZXZlbnQgaW5zdGFuY2VvZiBUb3VjaGVkQ2hhbmdlRXZlbnQ7XG59XG5cbnR5cGUgRm9ybUV2ZW50RGF0YTxUPiA9IHtcblx0dmFsdWU6IFQ7XG5cdHN0YXR1czogRm9ybUNvbnRyb2xTdGF0dXM7XG5cdHRvdWNoZWQ6IGJvb2xlYW47XG5cdHByaXN0aW5lOiBib29sZWFuO1xuXHR2YWxpZDogYm9vbGVhbjtcblx0aW52YWxpZDogYm9vbGVhbjtcblx0cGVuZGluZzogYm9vbGVhbjtcblx0ZGlydHk6IGJvb2xlYW47XG5cdHVudG91Y2hlZDogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBhbGxFdmVudHNPYnNlcnZhYmxlPFQ+KFxuXHRmb3JtOiBBYnN0cmFjdENvbnRyb2w8VD4sXG4pOiBPYnNlcnZhYmxlPEZvcm1FdmVudERhdGE8VD4+O1xuZXhwb3J0IGZ1bmN0aW9uIGFsbEV2ZW50c09ic2VydmFibGU8VD4oXG5cdGZvcm06IEFic3RyYWN0Q29udHJvbCxcbik6IE9ic2VydmFibGU8Rm9ybUV2ZW50RGF0YTxUPj47XG5cbmV4cG9ydCBmdW5jdGlvbiBhbGxFdmVudHNPYnNlcnZhYmxlPFQ+KFxuXHRmb3JtOiBBYnN0cmFjdENvbnRyb2w8VD4sXG4pOiBPYnNlcnZhYmxlPEZvcm1FdmVudERhdGE8VD4+IHtcblx0cmV0dXJuIGRlZmVyKCgpID0+XG5cdFx0Y29tYmluZUxhdGVzdChbXG5cdFx0XHR2YWx1ZUV2ZW50cyQoZm9ybSkucGlwZShcblx0XHRcdFx0c3RhcnRXaXRoKGZvcm0uZ2V0UmF3VmFsdWUoKSksXG5cdFx0XHRcdG1hcCgoKSA9PiBmb3JtLmdldFJhd1ZhbHVlKCkpLFxuXHRcdFx0XHRkaXN0aW5jdFVudGlsQ2hhbmdlZChcblx0XHRcdFx0XHQocHJldmlvdXMsIGN1cnJlbnQpID0+XG5cdFx0XHRcdFx0XHRKU09OLnN0cmluZ2lmeShwcmV2aW91cykgPT09IEpTT04uc3RyaW5naWZ5KGN1cnJlbnQpLFxuXHRcdFx0XHQpLFxuXHRcdFx0KSxcblx0XHRcdHN0YXR1c0V2ZW50cyQoZm9ybSkucGlwZShzdGFydFdpdGgoZm9ybS5zdGF0dXMpKSxcblx0XHRcdHRvdWNoZWRFdmVudHMkKGZvcm0pLnBpcGUoc3RhcnRXaXRoKGZvcm0udG91Y2hlZCkpLFxuXHRcdFx0cHJpc3RpbmVFdmVudHMkKGZvcm0pLnBpcGUoc3RhcnRXaXRoKGZvcm0ucHJpc3RpbmUpKSxcblx0XHRdKS5waXBlKFxuXHRcdFx0bWFwKChbdmFsdWVQYXJhbSwgc3RhdHVzUGFyYW0sIHRvdWNoZWRQYXJhbSwgcHJpc3RpbmVQYXJhbV0pID0+IHtcblx0XHRcdFx0Ly8gT3JpZ2luYWwgdmFsdWVzIChwbHVzIHZhbHVlKVxuXHRcdFx0XHRjb25zdCBzdGF0OiBGb3JtQ29udHJvbFN0YXR1cyB8IFN0YXR1c0NoYW5nZUV2ZW50ID0gaXNTdGF0dXNFdmVudChcblx0XHRcdFx0XHRzdGF0dXNQYXJhbSxcblx0XHRcdFx0KVxuXHRcdFx0XHRcdD8gc3RhdHVzUGFyYW0uc3RhdHVzXG5cdFx0XHRcdFx0OiBzdGF0dXNQYXJhbTtcblx0XHRcdFx0Y29uc3QgdG91Y2g6IGJvb2xlYW4gfCBUb3VjaGVkQ2hhbmdlRXZlbnQgPSBpc1RvdWNoZWRFdmVudCh0b3VjaGVkUGFyYW0pXG5cdFx0XHRcdFx0PyB0b3VjaGVkUGFyYW0udG91Y2hlZFxuXHRcdFx0XHRcdDogdG91Y2hlZFBhcmFtO1xuXHRcdFx0XHRjb25zdCBwcmlzdDogYm9vbGVhbiB8IFByaXN0aW5lQ2hhbmdlRXZlbnQgPSBpc1ByaXN0aW5lRXZlbnQoXG5cdFx0XHRcdFx0cHJpc3RpbmVQYXJhbSxcblx0XHRcdFx0KVxuXHRcdFx0XHRcdD8gcHJpc3RpbmVQYXJhbS5wcmlzdGluZVxuXHRcdFx0XHRcdDogcHJpc3RpbmVQYXJhbTtcblxuXHRcdFx0XHQvLyBEZXJpdmVkIHZhbHVlcyAtIG5vdCBkaXJlY3RseSBuYW1lZCBhcyBldmVudHMgYnV0IGFyZSBhbGlhc2VzIGZvciBzb21ldGhpbmcgdGhhdCBjYW4gYmUgZGVyaXZlZCBmcm9tIG9yaWdpbmFsIHZhbHVlc1xuXHRcdFx0XHRjb25zdCB2YWxpZERlcml2ZWQgPSBzdGF0ID09PSAnVkFMSUQnO1xuXHRcdFx0XHRjb25zdCBpbnZhbGlkRGVyaXZlZCA9IHN0YXQgPT09ICdJTlZBTElEJztcblx0XHRcdFx0Y29uc3QgcGVuZGluZ0Rlcml2ZWQgPSBzdGF0ID09PSAnUEVORElORyc7XG5cdFx0XHRcdGNvbnN0IGRpcnR5RGVyaXZlZCA9ICFwcmlzdDtcblx0XHRcdFx0Y29uc3QgdW50b3VjaGVkRGVyaXZlZCA9ICF0b3VjaDtcblxuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHZhbHVlOiB2YWx1ZVBhcmFtLFxuXHRcdFx0XHRcdHN0YXR1czogc3RhdCxcblx0XHRcdFx0XHR0b3VjaGVkOiB0b3VjaCxcblx0XHRcdFx0XHRwcmlzdGluZTogcHJpc3QsXG5cdFx0XHRcdFx0dmFsaWQ6IHZhbGlkRGVyaXZlZCxcblx0XHRcdFx0XHRpbnZhbGlkOiBpbnZhbGlkRGVyaXZlZCxcblx0XHRcdFx0XHRwZW5kaW5nOiBwZW5kaW5nRGVyaXZlZCxcblx0XHRcdFx0XHRkaXJ0eTogZGlydHlEZXJpdmVkLFxuXHRcdFx0XHRcdHVudG91Y2hlZDogdW50b3VjaGVkRGVyaXZlZCxcblx0XHRcdFx0fTtcblx0XHRcdH0pLFxuXHRcdCksXG5cdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbGxFdmVudHNTaWduYWw8VD4oXG5cdGZvcm06IEFic3RyYWN0Q29udHJvbDxUPixcbik6IFNpZ25hbDxGb3JtRXZlbnREYXRhPFQ+PjtcbmV4cG9ydCBmdW5jdGlvbiBhbGxFdmVudHNTaWduYWw8VD4oXG5cdGZvcm06IEFic3RyYWN0Q29udHJvbCxcbik6IFNpZ25hbDxGb3JtRXZlbnREYXRhPFQ+PjtcblxuZXhwb3J0IGZ1bmN0aW9uIGFsbEV2ZW50c1NpZ25hbDxUPihcblx0Zm9ybTogQWJzdHJhY3RDb250cm9sPFQ+LFxuKTogU2lnbmFsPEZvcm1FdmVudERhdGE8VD4+IHtcblx0cmV0dXJuIHRvU2lnbmFsKGFsbEV2ZW50c09ic2VydmFibGUoZm9ybSksIHtcblx0XHRpbml0aWFsVmFsdWU6IHtcblx0XHRcdHZhbHVlOiBmb3JtLmdldFJhd1ZhbHVlKCksXG5cdFx0XHRzdGF0dXM6IGZvcm0uc3RhdHVzLFxuXHRcdFx0cHJpc3RpbmU6IGZvcm0ucHJpc3RpbmUsXG5cdFx0XHR0b3VjaGVkOiBmb3JtLnRvdWNoZWQsXG5cdFx0XHR2YWxpZDogZm9ybS52YWxpZCxcblx0XHRcdGludmFsaWQ6IGZvcm0uaW52YWxpZCxcblx0XHRcdHBlbmRpbmc6IGZvcm0ucGVuZGluZyxcblx0XHRcdGRpcnR5OiBmb3JtLmRpcnR5LFxuXHRcdFx0dW50b3VjaGVkOiBmb3JtLnVudG91Y2hlZCxcblx0XHR9LFxuXHR9KTtcbn1cbiJdfQ==